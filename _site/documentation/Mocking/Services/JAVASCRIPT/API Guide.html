<!DOCTYPE html>
<html>
<head>
	<title>Test Armada</title>
	<link rel="stylesheet" type="text/css" href="/css/normalize.css">
	<link rel="stylesheet" type="text/css" href="/css/common.css">
	<link rel="stylesheet" type="text/css" href="/css/header.css">
	<link rel="stylesheet" type="text/css" href="/css/home.css">
	<link rel="stylesheet" type="text/css" href="/css/doc.css">
	<link rel="stylesheet" type="text/css" href="/css/training.css">
	<link rel="stylesheet" type="text/css" href="/css/faq.css">
	<link rel="stylesheet" type="text/css" href="/css/contact.css">
	<link rel="stylesheet" type="text/css" href="/css/search.css">
	<link rel="stylesheet" type="text/css" href="/css/slick.css">
	<link rel="stylesheet" type="text/css" href="/css/prism.css">
	<link rel="stylesheet" type="text/css" href="/css/responsive.css">
</head>
<body>
	
	<header>
		<a href="/">
			<img src="/documentation/images/ta-logo.png" class="logo" alt="Main Brand Logo"
				 srcset="/documentation/images/ta-logo@2x.png 2x, /documentation/images/ta-logo@3x.png 3x">
		</a>
		<form action="/search" method="get">
			<input type="text" id="search-box" name="query" placeholder="Search" class="search-box">
			<div class="select-box">
				<select name="fleet" id="fleet-box" onchange="document.getElementById('search-box').focus();">
					<option value="all">All Fleets</option>
					
					<option value="Performance Testing">Performance Testing</option>
					
					<option value="Functional Testing">Functional Testing</option>
					
					<option value="Mocking">Mocking</option>
					
					<option value="Data Insights">Data Insights</option>
					
				</select>
			</div>
		</form>
		<div class="nav-links">
			<div class="nav-links__fleets">
				<a class="nav-links__fleets-btn">
					Fleets <img src="/images/arrow-down-icon.png" class="arrow-down-icon"
								srcset="/images/arrow-down-icon@2x.png 2x,
										/images/arrow-down-icon@3x.png 3x">
				</a>
				<div class="nav-links__fleets-content">
					<a href="/">
						All Fleets
					</a>
					
					<a href="/Performance Testing/">
						Performance Testing
					</a>
					
					<a href="/Functional Testing/">
						Functional Testing
					</a>
					
					<a href="/Mocking/">
						Mocking
					</a>
					
					<a href="/Data Insights/">
						Data Insights
					</a>
					
				</div>
			</div>
			
			
			
			<a href="https://github.com/pranavparikh/docstest" target="_blank" class="nav-links__main-links">GitHub</a>
			
		</div>
	</header>

	<div class="container">
		  <div class="clear"></div>
<div class="doc-container">
  <div class="breadcrumb doc-breadcrumb">
    <p>
      <a class="breadcrumb__link" href="/">Home</a>
      <img src="/images/arrow-right-icon.png"
           srcset="/images/arrow-right-icon@2x.png 2x,
                   /images/arrow-right-icon@3x.png 3x"
           class="arrow-right-icon">
      <a class="breadcrumb__link" href="/Mocking/">Mocking</a>
      <img src="/images/arrow-right-icon.png"
           srcset="/images/arrow-right-icon@2x.png 2x,
                   /images/arrow-right-icon@3x.png 3x"
           class="arrow-right-icon">
      <span class="breadcrumb__current-page">Services JAVASCRIPT</span>
    </p>
  </div>
  <div class="clear"></div>
  <div class="sidebar">
    <ul>
    
    
    
    
    
    
    
    
    
    
    
    
      
      
        
          
          
            
            <li><a href="/documentation/Mocking/Services/JAVASCRIPT/Introduction" class="sidebar__file-links">
              Introduction
            </a></li>
            
          
        
      
        
          
          
            
            <li><a href="/documentation/Mocking/Services/JAVASCRIPT/Getting Started" class="sidebar__file-links">
              Getting Started
            </a></li>
            
          
        
      
        
          
            
            
              <li class="sidebar__file-links sidebar__file-links-current">Developer Guide</li>
            
          
          
          
            
            <li><a href="/Mocking/Services/JAVASCRIPT/Training Guide" class="sidebar__file-links sidebar__file-sublink">
              Training Guide
            </a></li>
            
          
        
      
        
          
          
          
            
            <li><a href="/documentation/Mocking/Services/JAVASCRIPT/API Guide" class="sidebar__file-links sidebar__file-sublink-current sidebar__file-sublink">
              API Guide
            </a></li>
            
          
        
      
        
          
          
            
            <li><a href="/documentation/Mocking/Services/JAVASCRIPT/Contribution Guide" class="sidebar__file-links">
              Contribution Guide
            </a></li>
            
          
        
      
        
          
          
            
            <li><a href="/documentation/Mocking/Services/JAVASCRIPT/FAQ" class="sidebar__file-links">
              FAQ
            </a></li>
            
          
        
      
    
    
    
    
    
    
    
    
    
    
    
    
    </ul>
  </div>
  <div class="doc-content markdown">
    <!-- TOC -->

<ul>
  <li><a href="#mocking-apis">Mocking API’s</a>
    <ul>
      <li><a href="#start-mock-server---start">Start Mock Server - start()</a></li>
      <li><a href="#stop-mock-server---stop">Stop Mock Server - stop()</a></li>
      <li><a href="#create-mocked-route---route">Create Mocked Route - route()</a></li>
      <li><a href="#create-variant---variant">Create Variant - variant()</a></li>
      <li><a href="#set-variant---setmockvariant">Set variant - setMockVariant()</a></li>
      <li><a href="#add-global-variants---addglobalvariant">Add global variants - addGlobalVariant()</a></li>
      <li><a href="#respond-with-file---respondwithfile">Respond With File - respondWithFile()</a></li>
      <li><a href="#respond-with-mock-variant---respondwithmockvariant">Respond with mock variant - respondWithMockVariant()</a></li>
      <li><a href="#set-mock-id---setmockid">Set Mock Id - setMockId()</a></li>
      <li><a href="#get-mock-id---getmockid">Get Mock Id - getMockId()</a></li>
      <li><a href="#reset-mock-id---resetmockid">Reset Mock Id - resetMockId()</a></li>
      <li><a href="#reset-url-count---reseturlcount">Reset url count - resetURLCount()</a></li>
      <li><a href="#get-url-count---geturlcount">Get url count - getURLCount()</a></li>
      <li><a href="#register-session---registersession">Register session - registerSession()</a></li>
      <li><a href="#close-session---closesession">Close session - closeSession()</a></li>
      <li><a href="#check-session---checksession">Check session - checkSession()</a></li>
      <li><a href="#get-sessions---getsessions">Get sessions - getSessions()</a></li>
      <li><a href="#clear-sessions---clearsessions">Clear sessions - clearSessions()</a></li>
      <li><a href="#get-project-name---getprojectname">Get project name - getProjectName()</a></li>
      <li><a href="#get-port-information---getportinfo">Get port information - getPortInfo()</a></li>
      <li><a href="#add-state---addstate">Add state - addState()</a></li>
      <li><a href="#get-state---getstate">Get state - getState()</a></li>
      <li><a href="#clear-state---clearstate">Clear state - clearState()</a></li>
      <li><a href="#enable-metrics---enablemetrics">Enable Metrics - enableMetrics()</a></li>
      <li><a href="#check-if-metrics-are-enabled---ismetricsenabled">Check if metrics are enabled - isMetricsEnabled()</a></li>
      <li><a href="#dynamic-transposition-of-json-data---transposedata">Dynamic transposition of JSON data - transposeData()</a></li>
      <li><a href="#kill-process---killprocess">Kill process - killProcess()</a></li>
      <li><a href="#read-contents-of-a-file---readfile">Read contents of a file - readFile()</a></li>
      <li><a href="#read-contents-of-a-file---readfilesynchronously">Read contents of a file - readFileSynchronously()</a></li>
      <li><a href="#read-contents-of-json-file---readjsonfile">Read contents of JSON file - readJsonFile()</a></li>
      <li><a href="#write-to-file---writefile">Write to file - writeFile()</a></li>
      <li><a href="#delete-file---deletefile">Delete file - deleteFile()</a></li>
      <li><a href="#check-if-directory-exists---checkdirectoryexists">Check if directory exists - checkDirectoryExists()</a></li>
      <li><a href="#check-if-file-exists---checkfileexists">Check if file exists - checkFileExists()</a></li>
      <li><a href="#set-log-level---setloglevel">Set Log level - setLogLevel()</a></li>
      <li><a href="#get-log-level---getloglevel">Get Log level - getLogLevel()</a></li>
      <li><a href="#reset-log-level---resetloglevel">Reset Log level - resetLogLevel()</a></li>
    </ul>
  </li>
</ul>

<!-- /TOC -->

<h2 id="mocking-apis">Mocking API’s</h2>

<h3 id="start-mock-server---start">Start Mock Server - start()</h3>

<p>This API allows to start the mock server.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.start(options, callback);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">options</td>
      <td>JSON object with the attributes described in the table below</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">callback</td>
      <td>The first argument to callback function is the server instance if the start is successful, else it is an error.</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p>where <strong><em><code class="highlighter-rouge">options</code></em></strong> has the following attributes:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">host</td>
      <td>Hostname for mock server (default: localhost)</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">port</td>
      <td>Port for mock server (default: 8080)</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">httpsPort</td>
      <td>Https port for mock server</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">mockedDirectory</td>
      <td>Path to the mocked data directory (default: <code class="highlighter-rouge">resources/mocked-data</code> w.r.t working directory).</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">sessions</td>
      <td>Number of parallel sessions to start the mock server with (default: 0)</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">collectMetrics</td>
      <td>Enable mock server to collect usage metrics (default: true)</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">project</td>
      <td>Name for your project (default: default)</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu');
shifu.start({
  host: 'localhost',
  port: 12000,
  httpsPort: 12001,
  mockedDirectory: '/resources/mockedData',
  sessions: 3,
  project: 'My Project'
});
</code></pre></div></div>

<hr />

<p><br /></p>

<h3 id="stop-mock-server---stop">Stop Mock Server - stop()</h3>

<p>This API allows to stop the mock server.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.stop(server, callback);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">server</td>
      <td>server instance returned by start() method</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">callback</td>
      <td>The first argument to callback function is an error if an error is encountered in stopping the server, null otherwise</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu');
var server = shifu.start(options, callback);

// do something with mock server

shifu.stop(server, function (error) {
  if (error) {
      console.log('Unable to stop mock server');
  } else {
      console.log('Mock Server stopped');
  }
});
</code></pre></div></div>

<hr />

<p><br /></p>

<h3 id="create-mocked-route---route">Create Mocked Route - route()</h3>

<p>This API allows to create/add required mocked REST endpoints.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.route(options);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">options</td>
      <td>JSON object with the attributes described in the table below</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p>where <strong><em><code class="highlighter-rouge">options</code></em></strong> has the following attributes:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">id</td>
      <td>The unique route id for the mock server</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">label</td>
      <td>The route label used for display on the Shifu Admin Panel</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">path</td>
      <td>The route path</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">method</td>
      <td>The HTTP route method (defaults to <code class="highlighter-rouge">GET</code>)</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">handler</td>
      <td>The HAPI route handler which provides the route response. This is optional because you could use multiple variants to handle the response (See Variants)</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu');
shifu.route({
  id: 'my_route',
  label: 'My Route',
  path: '/api/foo',
  method: 'GET',
  handler: function(request, reply) {
    // Add logic for handler
    reply('Hello');
  }
});
</code></pre></div></div>

<hr />

<p><br /></p>

<h3 id="create-variant---variant">Create Variant - variant()</h3>

<p>This API allows to create/add variants. Variants are route handlers that you can select manually (via Shifu Admin panel) or Rest call or through Node API to select a different dataset for the response for a given route. Variants are defined using the <code class="highlighter-rouge">variant()</code> method on the Route object (returned by calling the route method).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.route(routeOptions).variant(options)
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">options</td>
      <td>JSON object with the attributes described in the table below</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p>where <strong><em><code class="highlighter-rouge">options</code></em></strong> has the following attributes:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">id</td>
      <td>The unique variant id for a given route</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">label</td>
      <td>The route label used for display on the Admin Panel</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">handler</td>
      <td>The HAPI route handler which provides the variant response for the route</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>

<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">shifu</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'shifu'</span><span class="p">);</span>
<span class="nx">shifu</span><span class="p">.</span><span class="nx">route</span><span class="p">({</span>
  <span class="na">id</span><span class="p">:</span> <span class="s1">'my_route'</span><span class="p">,</span>
  <span class="na">path</span><span class="p">:</span> <span class="s1">'/api/foo'</span><span class="p">,</span>
  <span class="na">handler</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">reply</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// this is essentially the same as the "default" variant</span>
    <span class="nx">reply</span><span class="p">({</span><span class="na">firstName</span><span class="p">:</span> <span class="s1">'John'</span><span class="p">});</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">variant</span><span class="p">({</span>
  <span class="na">id</span><span class="p">:</span> <span class="s1">'Billy'</span><span class="p">,</span>
  <span class="na">handler</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">reply</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">reply</span><span class="p">({</span><span class="na">firstName</span><span class="p">:</span> <span class="s1">'Billy'</span><span class="p">});</span>
  <span class="p">}</span>
<span class="p">})</span>
<span class="p">.</span><span class="nx">variant</span><span class="p">({</span>
  <span class="na">id</span><span class="p">:</span> <span class="s1">'Clark'</span><span class="p">,</span>
  <span class="na">handler</span><span class="p">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">request</span><span class="p">,</span> <span class="nx">reply</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">reply</span><span class="p">({</span><span class="na">firstName</span><span class="p">:</span> <span class="s1">'Billy'</span><span class="p">});</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<hr />

<p><br /></p>

<h3 id="set-variant---setmockvariant">Set variant - setMockVariant()</h3>
<p><code class="highlighter-rouge">setMockVariant</code> can be used to set a variant to an existing API path.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.setMockVariant(options, callback) // with Shifu library

or 

browser.setMockVariant(options, callback) // when using Magellan
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">options</td>
      <td>JSON object with the attributes described in the table below</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">callback</td>
      <td>callback function to be called after setMockVariant()</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p>where <code class="highlighter-rouge">options</code> has the following attributes:</p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">fixture</td>
      <td>Id defined in route</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">variant</td>
      <td>The variant defined in endpoint.js for the fixture you entered</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">portNumber</td>
      <td>Port number where the mock server is running on</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">shifuSessionId</td>
      <td>Shifu session id, if using parallel sessions</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>

<p>If the routes are defined like</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu');
shifu.route({
  id: 'hello',
  path: '/helloWorld',
  handler: function(request, reply) {
    reply('Hello World');
  }
})
.variant({
  id: 'universe',
  handler: function(request, reply) {
    reply('Hello Universe');
  }
});
</code></pre></div></div>

<p>For the route and variant defined as above, you can set the variant to <code class="highlighter-rouge">universe</code> as follows:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// when using Shifu library
shifu.setMockVariant({
    fixture: 'hello', // same as id in the .route() options
    variant: 'universe' // same as id in the .variant() options
}, function (err) {
    if (err) {
        console.log('Error in setting variant:' + err);
    } else {
        console.log('Successfully set variant');
    }
});

or 

// When using Magellan
browser.setMockVariant({ fixture: "hello", variant: "universe" });

or 

Alternately, you can also use `curl` call to set a variant with this POST call to `{host}:{port}/shifu/api/route/{routeId}`

curl -H "Content-Type: application/json" -X POST -d '{"variant":"{universe}"}' http://localhost:8080/shifu/api/route/hello?returnConfig=true
</code></pre></div></div>

<p>You can confirm if this works by going to Admin panel and see that for <code class="highlighter-rouge">helloWorld</code> route, the variant <code class="highlighter-rouge">universe</code> will be highlighted. Also, hitting this url <code class="highlighter-rouge">http://localhost:8080/helloWorld</code> will reply with <code class="highlighter-rouge">Hello Universe</code>.</p>

<p>If the variant does not exist on the route, mock server returns with an Internal Server error (HTTP 500).</p>

<hr />

<p><br /></p>

<h3 id="add-global-variants---addglobalvariant">Add global variants - addGlobalVariant()</h3>

<p>You can also add global variants that will affect all routes. The attributes to the <code class="highlighter-rouge">options</code> are same as that of <code class="highlighter-rouge">variant()</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.route(routeOptions).addGlobalVariant(options)
</code></pre></div></div>

<p>where</p>

<p><strong>options</strong> - JSON object with the same attributes as of variant <a href="#set-variant---setmockvariant">described in this section</a></p>

<p><strong>Example</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu');

shifu.addGlobalVariant({
  id: '500',
  label: '500 error',
  handler: function(request, reply) {
    reply({
      statusCode: 500,
      error: 'Internal Server Error'
    }).code(500);
  }
})
</code></pre></div></div>
<hr />

<p><br /></p>

<h3 id="respond-with-file---respondwithfile">Respond With File - respondWithFile()</h3>

<p>This API allows to respond with static data stored in a file instead of hard coding the response data in the routes definition. Based on the path of the URL that is being mocked, the response file can be dropped in the directory location and the file will be automatically used by Shifu for sending the response. It also allows to specify the absolute path of the response files.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.util.respondWithFile(route, reply, options);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">route</td>
      <td>Handle to the shifu route object</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">reply</td>
      <td>Handle to the reply object</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">options</td>
      <td>JSON object with additional options desribed below</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">code</td>
      <td>HTTP Status code to reply with</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">filePath</td>
      <td>Static file path of the mocked data</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">delay</td>
      <td>Delay response time by this value (in milliseconds)</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p>To use this feature, you can call <code class="highlighter-rouge">respondWithFile()</code> from inside route configuration as follows:</p>

<p><strong>Example</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu');

// Automatic reply of the file
shifu.route({
  id: 'Get Collection',
  label: 'Get Collections',
  path: '/product/grouping/api/collection/{collectionId}'

  handler: function(req, reply) {
    shifu.util.respondWithFile(this, reply);
  }
})

.variant({
  id: 'mixItem',
  label: 'Mix Item'

  handler: function(req, reply) {
    shifu.util.respondWithFile(this, reply, {code: 204, filePath: '../mocked-data/fileName.json', delay: 1000});
  }
})
</code></pre></div></div>

<p><strong><em>Note the Use of <code class="highlighter-rouge">shifu.util</code> to access the method <code class="highlighter-rouge">respondWithFile</code></em></strong></p>

<hr />

<p><br /></p>

<h3 id="respond-with-mock-variant---respondwithmockvariant">Respond with mock variant - respondWithMockVariant()</h3>

<p>This API allows to respond with a variant on the main route handler. The ‘variant’ passed in MUST be the variant on existing route.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.util.respondWithMockVariant(route, variant, req, reply)
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">route</td>
      <td>The route object</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">variant</td>
      <td>Variant on the route</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">request</td>
      <td>Request object</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">reply</td>
      <td>Reply object</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu');
shifu.route({
    id: 'respondWithVariant',
    label: 'Respond With Variant',
    path: '/respondWithVariant',
    variantLabel: 'Respond With Main Route',
    handler: function(req, reply) {
        shifu.util.respondWithMockVariant(this, 'variant', req, reply); // make sure that the variant exist in the same route.
    }
}).variant({
    id: 'variant',
    label: 'Respond With Variant Route',
    handler: function(req, reply) {
        reply({
            'message': 'I am an example of respond_with_mock_variant instead of response of main route '
        });
    }
});
</code></pre></div></div>

<p><strong><em>Note the Use of <code class="highlighter-rouge">shifu.util</code> to access the method <code class="highlighter-rouge">respondWithMockVariant</code></em></strong></p>

<hr />

<p><br /></p>

<h3 id="set-mock-id---setmockid">Set Mock Id - setMockId()</h3>

<p>This API allows to set mock id for a given test case. If this is set, it overrides all the variants and mocked URLs responses to return mocked data from the given directory as <code class="highlighter-rouge">mock-id</code>, where <code class="highlighter-rouge">mock-id</code> is the directory name.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.setMockId(mockId, shifuSessionId) // with Shifu library

or 

browser.setMockId(mocKId, shifuSessionId, callback); // when using Magellan
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">mockId</td>
      <td>Mock id which is the directory name you want to respond data from</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">shifuSessionId</td>
      <td>Shifu session id, if using parallel sessions</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">callback</td>
      <td>callback function to be invoked after mock id is set (only when using Magellan)</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p>The file name should be in the format <code class="highlighter-rouge">url-methodName-urlCount.extension</code> for the responses stored under file. For example, for the given route below</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu');

shifu.route({
  id: 'my_route',
  label: 'My Route',
  path: '/api/foo',
  method: 'GET',

  handler: function(req, reply) {
    shifu.util.respondWithFile(this, reply);
  }
});
</code></pre></div></div>

<p>the file name should be <code class="highlighter-rouge">api-foo-GET-1.json</code> for the first time the URL is hit. For second time the URL is hit, the file name returned would be <code class="highlighter-rouge">api-foo-GET-2.json</code>. If the specific file for the count is not present, Shifu will look for default file <code class="highlighter-rouge">api-foo-GET.json</code>, which is also helpful if you want to always return the same response irrespective of the number of times the URL is hit.</p>

<p><strong>Example</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu');
shifu.setMockId('cart', 'abcdef'); // All responses should be under "cart" directory under your mocked data directory

or 

browser.setMockId('cart', 'abcdef' , callback);

or

curl http://localhost:8000/shifu/api/setMockId/cart/abcdef

</code></pre></div></div>

<p><code class="highlighter-rouge">TIP!</code> For a dynamic url such as <code class="highlighter-rouge">/app/{cartid}/getStatus</code> the default file name should be <code class="highlighter-rouge">app-cartid-getStatus-GET.json</code> and the count specific file name should be like <code class="highlighter-rouge">app-cartid-getStatus-GET-1.json</code>.</p>

<hr />

<p><br /></p>

<h3 id="get-mock-id---getmockid">Get Mock Id - getMockId()</h3>

<p>This API is used to retrieve the currently set mock id.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.getMockId(shifuSessionId);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">shifuSessionId</td>
      <td>Shifu session id, if using parallel sessions</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu');
var mockId = shifu.getMockId('abcdef');

or 

curl http://localhost:8000/shifu/api/getMockId/cart/abcdef

</code></pre></div></div>

<p>Note that <code class="highlighter-rouge">abcdef</code> is the session id in use for the current test (optional, if not using parallel sessions)</p>

<hr />

<p><br /></p>

<h3 id="reset-mock-id---resetmockid">Reset Mock Id - resetMockId()</h3>

<p>This API is used to reset currently set mock id.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.resetMockId(shifuSessionId) // with Shifu library

or 

browser.resetMockId(shifuSessionId, callback); // when using Magellan
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">shifuSessionId</td>
      <td>Shifu session id, if using parallel sessions</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">callback</td>
      <td>callback function to be invoked after mock id is set (only when using Magellan)</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu');
shifu.resetMockId('abcdef');

or 

browser.resetMockId('abcdef', callback);

or 

curl http://localhost:8000/shifu/api/resetMockId/cart/abcdef

</code></pre></div></div>

<p>Note that <code class="highlighter-rouge">abcdef</code> is the session id in use for the current test (optional, if not using parallel sessions)</p>

<hr />

<p><br /></p>

<h3 id="reset-url-count---reseturlcount">Reset url count - resetURLCount()</h3>

<p>This API is used to reset URL count to zero. This works in conjunction with <code class="highlighter-rouge">setMockId</code> function where you want to restart over for the URL count.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.resetURLCount(shifuSessionId)

or 

browser.resetURLCount(shifuSessionId, callback)
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">shifuSessionId</td>
      <td>Shifu session id, if using parallel sessions</td>
      <td style="text-align: center">No</td>
    </tr>
    <tr>
      <td style="text-align: center">callback</td>
      <td>callback function to be be invoked after the mock id is reset</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu');
shifu.resetURLCount('abcdef');

or 

browser.resetCount('abcdef', callback); // 'abcdef' is a shifu session id in use for the test

or

curl http://localhost:8000/shifu/api/resetURLCount/abcdef
</code></pre></div></div>

<p>Note that <code class="highlighter-rouge">abcdef</code> is the session id in use for the current test (optional, if not using parallel sessions)</p>

<hr />

<p><br /></p>

<h3 id="get-url-count---geturlcount">Get url count - getURLCount()</h3>

<p>This API is used in conjunction with <code class="highlighter-rouge">setMockId</code> function where you want to get the URL count for all mocked calls.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.getURLCount(shifuSessionId)
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">shifuSessionId</td>
      <td>Shifu session id, if using parallel sessions</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu');
shifu.getURLCount('abcdef');

or 

curl http://localhost:8000/shifu/api/getURLCount/abcdef

</code></pre></div></div>

<p>Note that <code class="highlighter-rouge">abcdef</code> is the session id in use for the current test (optional, if not using parallel sessions)</p>

<hr />

<p><br /></p>

<h3 id="register-session---registersession">Register session - registerSession()</h3>

<p>This API is used to register a session with Shifu for a test case when using parallel sessions. Shifu needs to be started with <code class="highlighter-rouge">sessions</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.registerSession(); // with Shifu library

or 

browser.registerSession(callback); // with browser tests
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">callback</td>
      <td>callback function to be be invoked after the session is registered. First argument to the callback is an error object, in case of error, null otherwise. The second argument is the registered session id (Only for browser tests)</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p>You can use <code class="highlighter-rouge">registerSession()</code> to register a session with Shifu and can subsequently use that session id for the current test. Shifu returns a unique identifier when registering a session.</p>

<p>If no session is available to use, Shifu returns with the message <code class="highlighter-rouge">NOT_AVAILABLE</code>.</p>

<p><strong>Example</strong></p>

<p>If <code class="highlighter-rouge">shifu</code> server is started with sessions, for e.g 3 sessions as shown below,</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu');
shifu.start({
    host: 'localhost',
    port: 8080,
    mockedDirectory: 'resources/mockedData',
    sessions: 3
});
var shifuSessionId = shifu.registerSession();

or


 browser.registerSession(function (err, sessId) {
    if (err) {
      return callback(new Error("Unable to get the sessionId"));
    }
    self.shifuSessionId = sessId;
    client.shifuSessionId = sessId; 
    return callback();
});

or

curl http://localhost:8000/shifu/api/registerSession
</code></pre></div></div>

<hr />

<p><br /></p>

<h3 id="close-session---closesession">Close session - closeSession()</h3>

<p>This API is used to close a session after running a test so it can be made available for subsequent tests.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.closeSession(shifuSessionId);

or 

browser.closeSession(shifuSessionId, callback);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">shifuSesssionId</td>
      <td>Shifu session id to be closed</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">callback</td>
      <td>callback function to be be invoked after the session is registered. First argument to the callback is an error object, in case of error, null otherwise (Only when using browser tests)</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);
shifu.closeSession('abcdef'); // abcdef is a previously registered session with Shifu

or 

client.closeSession('abcdef', function (err) {
  if (err) {
    console.error("Error in closing session:");
  }
});

or

curl http://localhost:8000/shifu/api/closeSession/abcdef
</code></pre></div></div>

<p>Note that <code class="highlighter-rouge">abcdef</code> is a previously registered session with Shifu.</p>

<hr />

<p><br /></p>

<h3 id="check-session---checksession">Check session - checkSession()</h3>

<p>This API is used to check status of a session id. It returns one of these states</p>

<ul>
  <li><code class="highlighter-rouge">AVAILABLE</code> - If the session is available for use</li>
  <li><code class="highlighter-rouge">IN_USE</code> - If the session is in use</li>
  <li><code class="highlighter-rouge">DOES_NOT_EXISTS</code> - If the session id passed is invalid or does not exist</li>
</ul>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">shifuSessionId</td>
      <td>Shifu session id</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);
var status = shifu.checkSession('abcdef');

or 

curl http://localhost:8000/shifu/api/checkSession/abcdef
</code></pre></div></div>

<hr />

<p><br /></p>

<h3 id="get-sessions---getsessions">Get sessions - getSessions()</h3>

<p>This API is used to get sessions information</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.getSessions();
</code></pre></div></div>

<p><strong>Example</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);
var status = shifu.getSessions();

or 

curl http://localhost:8000/shifu/api/getSessions
</code></pre></div></div>

<hr />

<p><br /></p>

<h3 id="clear-sessions---clearsessions">Clear sessions - clearSessions()</h3>

<p>This API is used to clear the sessions information.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.clearSessions();
</code></pre></div></div>

<p><strong>Example</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);
var status = shifu.clearSessions();
</code></pre></div></div>

<hr />

<p><br /></p>

<h3 id="get-project-name---getprojectname">Get project name - getProjectName()</h3>

<p>This API is used to get the project name passed in Shifu options</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.getProjectName();
</code></pre></div></div>

<p><strong>Example</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);
var projectName = shifu.getProjectName();
</code></pre></div></div>

<hr />

<p><br /></p>

<h3 id="get-port-information---getportinfo">Get port information - getPortInfo()</h3>

<p>This API is used to get the port information passed in Shifu options</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.getPortInfo();
</code></pre></div></div>

<p><strong>Example</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);
var portInfo = shifu.getPortInfo();
</code></pre></div></div>

<hr />

<p><br /></p>

<h3 id="add-state---addstate">Add state - addState()</h3>

<p>This API is used to add a value to the server state.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.addState(route, key, value);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">route</td>
      <td>Route object</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">key</td>
      <td>Key for the state variable</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">value</td>
      <td>Value of the state variable</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.route({
  id: 'setState',
  label: 'Add State',
  path: '/login',
  handler: function (req, reply) {
    shifu.addState(this, 'loggedIn', true);
    reply().code(204);
  }
});
</code></pre></div></div>

<hr />
<p><br /></p>

<h3 id="get-state---getstate">Get state - getState()</h3>

<p>This API is used to read a value from the server state.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.getState(route, key);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">route</td>
      <td>Route object</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">key</td>
      <td>Key for the state variable</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.route({
  id: 'getState',
  label: 'Get State',
  path: '/isLogin',
  handler: function (req, reply) {
    var isLoggedIn = shifu.getState(this, 'login');
    reply(isLoggedIn);
  }
});
</code></pre></div></div>

<hr />
<p><br /></p>

<h3 id="clear-state---clearstate">Clear state - clearState()</h3>

<p>This API is used to clear a state for a given session id (Defaults to <code class="highlighter-rouge">default</code> session).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.clearState(shifuSessionId);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">shifuSessionId</td>
      <td>Shifu session id</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.clearState(); // Clears state for default session

shifu.clearState('abcdef') // Clears state for session id `abcdef`
</code></pre></div></div>

<hr />
<p><br /></p>

<h3 id="enable-metrics---enablemetrics">Enable Metrics - enableMetrics()</h3>

<p>This API is used to enable gathering of usage metrics.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.enableMetrics(boolean);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">boolean</td>
      <td>true to enable, false to disable</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p><strong>Example</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.enableMetrics(true); // Enables gathering of usage metrics

shifu.enableMetrics(false); // Disables gathering of usage metrics
</code></pre></div></div>

<hr />

<p><br /></p>

<h3 id="check-if-metrics-are-enabled---ismetricsenabled">Check if metrics are enabled - isMetricsEnabled()</h3>

<p>This API is used to check if metrics gathering is enabled on Shifu. Returns true if metrics gathering is enabled, false otherwise</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.isMetricsEnabled();
</code></pre></div></div>

<p><strong>Example</strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.isMetricsEnabled();
</code></pre></div></div>

<hr />

<p><br /></p>

<h3 id="dynamic-transposition-of-json-data---transposedata">Dynamic transposition of JSON data - transposeData()</h3>

<p>This API allows to dynamically transpose the JSON data</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.util.transposeData(dataSet, dataToChange);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">dataSet</td>
      <td>The data set which needs to change</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">dataToChange</td>
      <td>The changes needed in the data set</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p>To change the JSON data on fly (edit existing values or add values).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Base JSON file
{
  "items":
  {
    "item":
    [
      {
        "id": "0001",
        "type": "donut",
        "name": "Cake",
        "ppu": 0.55,
        "batters":
        {
          "type" : 1,
          "batter":
          [
            { "id": "1001", "type": "Regular" },
          ]
        },
        "topping":
        [
          { "id": "5001", "type": "None" }
        ]
      }
    ]
  }
}

// Code example
var dataToChange = {
 'items.item[0].id': 1234, // substitue id 0001 to 1234
 'items.item[0].val': "value", // Add 'val' to first array element of items.item
 'items.item[1].id': 4567, // Add 'id' to second array element of items.item
 'items.item[0].batters.batter[0].id': 5678 // substitue id 1001 to 5678
}

// when using utils class
var fileLocation = require("path").join(__dirname, './resources/test-data/data-transposition-test.json');
var dataSet = utils.readJsonFile(fileLocation);
substitutedData = shifu.util.transposeData(dataSet, dataToChange);

// When using with respondwithFile (This will read the file based on url path and transpose the data)
shifu.util.respondWithFile(this, reply, {transpose: dataToChange});

// Resulted JSON
{
  "items": {
    "item": [
      {
        "id": 1234,
        "type": "donut",
        "name": "Cake",
        "ppu": 0.55,
        "val": "value"
        "batters": {
          "type": 1,
          "batter": [
            {"id": 5678, "type": "Regular"}
          ]
        },
        "topping": [
          {"id": "5001", "type": "None"}
        ]
      },
      {
        "id": 4567
      }
    ]
  }
}

</code></pre></div></div>

<p><strong><em>Note the Use of <code class="highlighter-rouge">shifu.util</code> to access the method <code class="highlighter-rouge">transposeData</code></em></strong></p>

<hr />

<p><br /></p>

<h3 id="kill-process---killprocess">Kill process - killProcess()</h3>

<p>This API allows to Kill a process with a pid</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.util.killProcess(pid, signal, callback);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">pid</td>
      <td>process id to kill</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">signal</td>
      <td>Signal to send (defaults to <code class="highlighter-rouge">SIGKILL</code> if passed undefined)</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">callback</td>
      <td>Callback function  after killprocess completes</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p><strong><em>Example</em></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.util.killProcess(18222, 'SIGKILL', function () {
  console.log('Process killed);
});
</code></pre></div></div>

<p><strong><em>Note the Use of <code class="highlighter-rouge">shifu.util</code> to access the method <code class="highlighter-rouge">killProcess</code></em></strong></p>

<hr />

<p><br /></p>

<h3 id="read-contents-of-a-file---readfile">Read contents of a file - readFile()</h3>

<p>This API allows to read contents of a file asynchronously</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.util.readFile(filePath, callback);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">file path</td>
      <td>Absolute or relative location of file</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">callback</td>
      <td>Callback function after file is read. If file is read successfully, the second argument is the file data. In case of error, the first argument is an error. Returns <code class="highlighter-rouge">promise</code> if callback is omitted</td>
      <td style="text-align: center">No</td>
    </tr>
  </tbody>
</table>

<p><strong><em>Example</em></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.util.readFile('data.json', function (err, fileData) {
  if (err) {
    console.log('Error in reading file ', err);
  } else {
    console.log(fileData);
  }
});
</code></pre></div></div>

<p><strong><em>Note the Use of <code class="highlighter-rouge">shifu.util</code> to access the method <code class="highlighter-rouge">readFile</code></em></strong></p>

<hr />

<p><br /></p>

<h3 id="read-contents-of-a-file---readfilesynchronously">Read contents of a file - readFileSynchronously()</h3>

<p>This API allows to read contents of a file synchronously</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.util.readFileSynchronously(filePath);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">file path</td>
      <td>Absolute or relative location of file</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p><strong><em>Example</em></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.util.readFileSynchronously('data.json');
</code></pre></div></div>

<p><strong><em>Note the Use of <code class="highlighter-rouge">shifu.util</code> to access the method <code class="highlighter-rouge">readFileSynchronously</code></em></strong></p>

<hr />

<p><br /></p>

<h3 id="read-contents-of-json-file---readjsonfile">Read contents of JSON file - readJsonFile()</h3>

<p>This API allows to read contents of a JSON file synchronously</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.util.readJsonFile(filePath);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">file path</td>
      <td>Absolute or relative location of JSON file</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p><strong><em>Example</em></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.util.readJsonFile('data.json');
</code></pre></div></div>

<p><strong><em>Note the Use of <code class="highlighter-rouge">shifu.util</code> to access the method <code class="highlighter-rouge">readJsonFile</code></em></strong></p>

<hr />

<p><br /></p>

<h3 id="write-to-file---writefile">Write to file - writeFile()</h3>

<p>This API allows to write file contents to a file</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.util.writeFile(filePath, file data, callback);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">file path</td>
      <td>Absolute or relative location of file</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">file data</td>
      <td>contents to write</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">callback</td>
      <td>Callback function after writeFile completes</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p><strong><em>Example</em></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.util.writeFile('hello.txt', 'hello world blah blah', function () {
  console.log('Wrote to file successfully');
});
</code></pre></div></div>

<p><strong><em>Note the Use of <code class="highlighter-rouge">shifu.util</code> to access the method <code class="highlighter-rouge">writeFile</code></em></strong></p>

<hr />

<p><br /></p>

<h3 id="delete-file---deletefile">Delete file - deleteFile()</h3>

<p>This API allows to write file contents to a file</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.util.deleteFile(filePath, callback);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">file location</td>
      <td>Absolute or relative location of file to delete</td>
      <td style="text-align: center">Yes</td>
    </tr>
    <tr>
      <td style="text-align: center">callback</td>
      <td>Callback function after deleteFile completes</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p><strong><em>Example</em></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.util.deleteFile('filetoDelete.txt', function (err) {
  if (err) {
    console.log('Error in deleting file');
  }
});
</code></pre></div></div>

<p><strong><em>Note the Use of <code class="highlighter-rouge">shifu.util</code> to access the method <code class="highlighter-rouge">deleteFile</code></em></strong></p>

<p><br /></p>

<h3 id="check-if-directory-exists---checkdirectoryexists">Check if directory exists - checkDirectoryExists()</h3>

<p>This API allows to check if a directory exists. Returns true if directory exists, false otherwise.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.util.checkDirectoryExists(directoryPath);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">directory path</td>
      <td>Location of directory to check</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p><strong><em>Example</em></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.util.checkDirectoryExists('/home/data');
</code></pre></div></div>

<p><strong><em>Note the Use of <code class="highlighter-rouge">shifu.util</code> to access the method <code class="highlighter-rouge">checkDirectoryExists</code></em></strong></p>

<p><br /></p>
<h3 id="check-if-file-exists---checkfileexists">Check if file exists - checkFileExists()</h3>

<p>This API allows to check if a file exists. Returns true if file exists, false otherwise.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.util.checkFileExists(filePath);
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">file path</td>
      <td>Location of file to check</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p><strong><em>Example</em></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.util.checkFileExists('/home/data');
</code></pre></div></div>

<p><strong><em>Note the Use of <code class="highlighter-rouge">shifu.util</code> to access the method <code class="highlighter-rouge">checkFileExists</code></em></strong></p>

<hr />

<p><br /></p>
<h3 id="set-log-level---setloglevel">Set Log level - setLogLevel()</h3>
<p>This API allows to set log level on Shifu</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.log.setLogLevel(logLevel); // when using Shifu

or

Logger.setLogLevel(logLevel); // when using Shifu-Logger
</code></pre></div></div>

<p><strong><em>The following attributes are supported:</em></strong></p>

<table>
  <thead>
    <tr>
      <th style="text-align: center">Attribute</th>
      <th>Description</th>
      <th style="text-align: center">Required</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: center">logLevel</td>
      <td>Log level you want to set .Valid values (warn/info/debug/error)</td>
      <td style="text-align: center">Yes</td>
    </tr>
  </tbody>
</table>

<p><strong><em>Example</em></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.log.setLogLevel('debug');

or

curl -X GET http://localhost:8080/shifu/api/setloglevel/debug
</code></pre></div></div>

<hr />

<p><br /></p>
<h3 id="get-log-level---getloglevel">Get Log level - getLogLevel()</h3>
<p>This API allows to get the current log level on Shifu</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.log.getLogLevel(); // when using Shifu

or 

Logger.getLogLevel(); // when using Shifu-Logger
</code></pre></div></div>

<p><strong><em>Example</em></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);

shifu.log.getLogLevel();

or

var Logger = require('shifu-logger');
Logger.getLogLevel();

or

curl -X GET http://localhost:8080/shifu/api/getloglevel
</code></pre></div></div>

<hr />

<p><br /></p>
<h3 id="reset-log-level---resetloglevel">Reset Log level - resetLogLevel()</h3>
<p>This API allows to reset the log level of Shifu to <code class="highlighter-rouge">info</code> (Default log level)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>shifu.log.resetLogLevel();

or 

Logger.resetLogLevel();
</code></pre></div></div>

<p><strong><em>Example</em></strong></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>var shifu = require('shifu);
shifu.log.resetLogLevel();

or

var Logger = require('shifu-logger');
Logger.resetLogLevel();

or 

curl -X GET http://localhost:8080/shifu/api/resetloglevel
</code></pre></div></div>

<hr />

  </div>
  <div class="clear"></div>
</div>
<script type="text/javascript">
  var elements = document.getElementsByClassName('highlight');
  for (var i = 0; i < elements.length; i++) {
    elements[i].className += " line-numbers";
    if (!elements[i].parentElement.classList.value.match(/language/)) {
      elements[i].children[0].className = "language-javascript";
    }
  }
</script>
<script type="text/javascript" src="/js/prism.js"></script>
<script src="/js/jquery-3.3.1.min.js"></script>
<script src="/js/doc.js"></script>
	</div>

	<footer>
		<img class="left-footer-logo" alt="Left Footer Logo"
			 src="/documentation/images/dxt-logo.png"
			 srcset="/documentation/images/dxt-logo@2x.png 2x,
					 /documentation/images/dxt-logo@3x.png 3x">
		
		<span class="copyright">&copy; None</span>
		
		<img class="right-footer-logo" alt="Right Footer Logo"
			 src="/documentation/images/walmartlabs-logo.png"
			 srcset="/documentation/images/walmartlabs-logo@2x.png 2x,
			 		 /documentation/images/walmartlabs-logo@3x.png 3x">
	</footer>

</body>
</html>
