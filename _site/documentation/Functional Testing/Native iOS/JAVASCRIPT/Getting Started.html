<!DOCTYPE html>
<html>
<head>
	<title>Test Armada</title>
	<link rel="stylesheet" type="text/css" href="/css/normalize.css">
	<link rel="stylesheet" type="text/css" href="/css/common.css">
	<link rel="stylesheet" type="text/css" href="/css/header.css">
	<link rel="stylesheet" type="text/css" href="/css/home.css">
	<link rel="stylesheet" type="text/css" href="/css/doc.css">
	<link rel="stylesheet" type="text/css" href="/css/training.css">
	<link rel="stylesheet" type="text/css" href="/css/faq.css">
	<link rel="stylesheet" type="text/css" href="/css/contact.css">
	<link rel="stylesheet" type="text/css" href="/css/search.css">
	<link rel="stylesheet" type="text/css" href="/css/slick.css">
	<link rel="stylesheet" type="text/css" href="/css/prism.css">
	<link rel="stylesheet" type="text/css" href="/css/responsive.css">
</head>
<body>
	
	<header>
		<a href="/">
			<img src="/documentation/images/ta-logo.png" class="logo" alt="Main Brand Logo"
				 srcset="/documentation/images/ta-logo@2x.png 2x, /documentation/images/ta-logo@3x.png 3x">
		</a>
		<form action="/search" method="get">
			<input type="text" id="search-box" name="query" placeholder="Search" class="search-box">
			<div class="select-box">
				<select name="fleet" id="fleet-box" onchange="document.getElementById('search-box').focus();">
					<option value="all">All Fleets</option>
					
					<option value="Performance Testing">Performance Testing</option>
					
					<option value="Functional Testing">Functional Testing</option>
					
					<option value="Mocking">Mocking</option>
					
					<option value="Data Insights">Data Insights</option>
					
				</select>
			</div>
		</form>
		<div class="nav-links">
			<div class="nav-links__fleets">
				<a class="nav-links__fleets-btn">
					Fleets <img src="/images/arrow-down-icon.png" class="arrow-down-icon"
								srcset="/images/arrow-down-icon@2x.png 2x,
										/images/arrow-down-icon@3x.png 3x">
				</a>
				<div class="nav-links__fleets-content">
					<a href="/">
						All Fleets
					</a>
					
					<a href="/Performance Testing/">
						Performance Testing
					</a>
					
					<a href="/Functional Testing/">
						Functional Testing
					</a>
					
					<a href="/Mocking/">
						Mocking
					</a>
					
					<a href="/Data Insights/">
						Data Insights
					</a>
					
				</div>
			</div>
			
			
			
			<a href="https://github.com/pranavparikh/docstest" target="_blank" class="nav-links__main-links">GitHub</a>
			
		</div>
	</header>

	<div class="container">
		  <div class="clear"></div>
<div class="doc-container">
  <div class="breadcrumb doc-breadcrumb">
    <p>
      <a class="breadcrumb__link" href="/">Home</a>
      <img src="/images/arrow-right-icon.png"
           srcset="/images/arrow-right-icon@2x.png 2x,
                   /images/arrow-right-icon@3x.png 3x"
           class="arrow-right-icon">
      <a class="breadcrumb__link" href="/Functional Testing/">Functional Testing</a>
      <img src="/images/arrow-right-icon.png"
           srcset="/images/arrow-right-icon@2x.png 2x,
                   /images/arrow-right-icon@3x.png 3x"
           class="arrow-right-icon">
      <span class="breadcrumb__current-page">Native iOS JAVASCRIPT</span>
    </p>
  </div>
  <div class="clear"></div>
  <div class="sidebar">
    <ul>
    
    
    
    
    
    
    
    
    
    
      
      
        
          
          
            
            <li><a href="/documentation/Functional Testing/Native iOS/JAVASCRIPT/Introduction" class="sidebar__file-links">
              Introduction
            </a></li>
            
          
        
      
        
          
          
            
            <li><a href="/documentation/Functional Testing/Native iOS/JAVASCRIPT/Getting Started" class="sidebar__file-links sidebar__file-links-current">
              Getting Started
            </a></li>
            
          
        
      
        
          
            
            
              <li class="sidebar__file-links">Developer Guide</li>
            
          
          
          
            
            <li><a href="/Functional Testing/Native iOS/JAVASCRIPT/Training Guide" class="sidebar__file-links sidebar__file-sublink">
              Training Guide
            </a></li>
            
          
        
      
        
          
          
          
            
            <li><a href="/documentation/Functional Testing/Native iOS/JAVASCRIPT/API Guide" class="sidebar__file-links sidebar__file-sublink">
              API Guide
            </a></li>
            
          
        
      
        
          
          
          
            
            <li><a href="/documentation/Functional Testing/Native iOS/JAVASCRIPT/Boilerplates" class="sidebar__file-links sidebar__file-sublink">
              Boilerplates
            </a></li>
            
          
        
      
        
          
          
            
            <li><a href="/documentation/Functional Testing/Native iOS/JAVASCRIPT/Contribution Guide" class="sidebar__file-links">
              Contribution Guide
            </a></li>
            
          
        
      
        
          
          
            
            <li><a href="/documentation/Functional Testing/Native iOS/JAVASCRIPT/FAQ" class="sidebar__file-links">
              FAQ
            </a></li>
            
          
        
      
    
    
    
    
    
    
    
    
    
    
    </ul>
  </div>
  <div class="doc-content markdown">
    <h2 id="pre-requisite">Pre Requisite</h2>

<p>The functional JS TDK requires minimum node@4 and npm@3 for device testing.</p>

<h2 id="getting-started-with-the-functional-js-tdk">Getting started with the functional JS TDK</h2>

<p>To proceed with native iOS app test, you also need latest <a href="https://developer.apple.com/support/xcode/">Xcode</a> and it’s command line tools. When you have Xcode setup, please make sure your desired iOS simulator is installed as well.</p>

<h3 id="setup">Setup</h3>

<p>Please follow the archetype project <a href="https://gecgithub01.walmart.com/otto/otto-archetype-app">otto-archetype-app</a> to have your first native app test automation project run in your local.</p>

<p>Then please follow the boilerplate project <a href="https://gecgithub01.walmart.com/otto/boilerplate-nightwatch-mobile">boilerplate-nightwatch-mobile</a> for more examples and advanced usage.</p>

<h3 id="via-command-line-arguments">Via Command Line Arguments</h3>

<p>Magellan which is part of the functional JS TDK is designed for running tests in massive scale, which means you’ve been granted the full control of the scalability. There are two ways to tell magellan how you want to scale your tests.</p>

<p>All command line arguments of magellan and its components (executors, reporters and plugins) that are enabled can be listed out by running following command in your favorite bash</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>./node_modules/.bin/magellan --help
</code></pre>
</div>

<p>Following is an example telling magellan to run tests with 30 workers, 5 retry attempts per failed test and bail whole suite if any failure is met.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>./node_modules/.bin/magellan --max_workers 30 --max_test_attempts 5 --bail_fast
</code></pre>
</div>

<h3 id="configure-test-profile">Configure test profile</h3>

<p>Magellan passes down test profile information, like which browser or test environment your test runs in, to its executor(s). Usually this is done by setting up a specific argument in magellan command, such as</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>./node_modules/.bin/magellan --local_browser chrome
</code></pre>
</div>

<h4 id="via-profile-command-line-argument">Via –profile command line argument</h4>

<p>Magellan can retrieve test profile information from an URL. This gives you the convenience of managing your test environments and sharing your configuration management in a more standard way. Furthermore, by putting test profiles in to a file, you can add more information into your test profile, such as screen resolution, orientation or device information for you app test.</p>

<p>The hosted test profile file needs to follow the format of</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="p">{</span>
  <span class="s2">"profiles"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"microsoftedge"</span><span class="err">:</span> <span class="p">[{</span>
      <span class="s2">"browser"</span><span class="p">:</span> <span class="s2">"microsoftedge_14_Windows_10_Desktop"</span><span class="p">,</span>
      <span class="s2">"resolution"</span><span class="p">:</span> <span class="s2">"1280x1024"</span><span class="p">,</span>
      <span class="s2">"executor"</span><span class="p">:</span> <span class="s2">"sauce"</span>
    <span class="p">}],</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Magellan can read and resolve the hosted profile by following command.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>./node_modules/.bin/magellan --profile http://some.host#microsoftedge
</code></pre>
</div>

<p>You can add as many test profiles as your need in the hosted file. Magellan is able to read more test profiles via</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>./node_modules/.bin/magellan --profile http://some.host#microsoftedge,googlechrome59,firefox57
</code></pre>
</div>

<p>Or, as a better way to handle multiple test profiles as a batch, you can put multiple test profiles into one collection, such as</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="p">{</span>
  <span class="s2">"profiles"</span><span class="err">:</span> <span class="p">{</span>
    <span class="s2">"tier-one-browsers"</span><span class="err">:</span> <span class="p">[{</span>
        <span class="s2">"browser"</span><span class="p">:</span> <span class="s2">"microsoftedge_14_Windows_10_Desktop"</span><span class="p">,</span>
        <span class="s2">"resolution"</span><span class="p">:</span> <span class="s2">"1280x1024"</span><span class="p">,</span>
        <span class="s2">"executor"</span><span class="p">:</span> <span class="s2">"sauce"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">"browser"</span><span class="p">:</span> <span class="s2">"chrome_latest_Windows_10_Desktop"</span><span class="p">,</span>
        <span class="s2">"resolution"</span><span class="p">:</span> <span class="s2">"1280x1024"</span><span class="p">,</span>
        <span class="s2">"executor"</span><span class="p">:</span> <span class="s2">"sauce"</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">"browser"</span><span class="p">:</span> <span class="s2">"iphone_10_0_iOS_iPhone_7_Simulator"</span><span class="p">,</span>
        <span class="s2">"orientation"</span><span class="p">:</span> <span class="s2">"portrait"</span><span class="p">,</span>
        <span class="s2">"appium"</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">"app"</span><span class="p">:</span> <span class="s2">"sauce-storage:my_app.zip"</span><span class="p">,</span>
          <span class="s2">"appiumVersion"</span><span class="p">:</span> <span class="s2">"1.6.4"</span><span class="p">,</span>
          <span class="s2">"automationName"</span><span class="p">:</span> <span class="s2">"xcuitest"</span><span class="p">,</span>
          <span class="s2">"sendKeyStrategy"</span><span class="p">:</span> <span class="s2">"setValue"</span><span class="p">,</span>
          <span class="s2">"waitForAppScript"</span><span class="p">:</span> <span class="s2">"true"</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>

<p>Then simply call magellan with</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>./node_modules/.bin/magellan --profile http://some.host#tier-one-browsers
</code></pre>
</div>

<h4 id="via-magellanjson-file">Via magellan.json file</h4>

<p>Magellan.json supports the same test profile format as the hosted test profile file. Put the above js code snippet in magellan.json and it is ready to use via</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>./node_modules/.bin/magellan --profile tier-one-browsers
</code></pre>
</div>

<h3 id="enable-executor">Enable executor</h3>

<p>You need to tell magellan which executor it should use for a test profile. By default, if no executor is specified in profile, magellan is going to run it with magellan-saucelabs-executor if it is configured in magellan.json or magellan will error out.</p>

<p>At least one executor has to be enabled in magellan.json. Please follow these steps to enable executor:</p>

<ol>
  <li>Install necessary executor via npm install
    <div class="language-bash highlighter-rouge"><pre class="highlight"><code>npm install testarmada-magellan-saucelabs-executor --save
</code></pre>
    </div>
  </li>
  <li>Add following code in your magellan.json
    <div class="language-js highlighter-rouge"><pre class="highlight"><code>  <span class="s2">"executors"</span><span class="err">:</span> <span class="p">[</span>
 <span class="s2">"magellan-saucelabs-executor"</span><span class="p">,</span>
  <span class="p">],</span>
</code></pre>
    </div>
  </li>
</ol>

<h4 id="run-test-with-executors">Run test with executor(s)</h4>

<p>Magellan allows to run tests with one or more executors at the same time. Typically this is done by passing a specific command line argument to magellan. For example, to enable magellan-local-executor for all the tests, this command line argument is required</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># to run in Chrome</span>
--local_browser chrome 
</code></pre>
</div>
<p>or</p>
<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># to run in both Chrome and Firefox</span>
--local_browsers chrome, firefox 
</code></pre>
</div>

<p>Here is another example to enable both magellan-local-executor and magellan-saucelabs-executor for your test:</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="c"># to run in local Chrome and Safari 10 on Saucelabs</span>
--local_browser chrome --sauce_browser safari_10_OS_X_10_11_Desktop 
</code></pre>
</div>

<h3 id="using-reporter">Using Reporter</h3>

<p>Reporter extends magellan’s reporting mechanism and increases the report format that magellan supports. With reporters magellan can now create test report in various formats for different audiences.</p>

<h4 id="enable-reporters">Enable reporter(s)</h4>

<p>To enable multiple reporters, simply add them in magellan.json</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code>  <span class="s2">"reporters"</span><span class="err">:</span> <span class="p">[</span>
    <span class="s2">"testarmada-magellan-xunit-reporter"</span><span class="p">,</span>
    <span class="s2">"testarmada-magellan-dev-reporter"</span>
  <span class="p">]</span>
</code></pre>
</div>

<p><em><strong>Please note:</strong> By default, magellan prints logs to terminal console while running. This default behavior won’t change and cannot be changed no matter how many other reporters are enabled.</em></p>

<h3 id="create-test-with-nightwatch-extra">Create test with Nightwatch-extra</h3>

<p>Nightwatch-extra supports everything that nightwatchjs supports. Please refer to nightwatchjs’ <a href="http://nightwatchjs.org/guide#using-nightwatch">developer guide</a> for the basic usage of nightwatchjs.</p>

<h3 id="extend-the-base-test-classjs">Extend the base-test-class.js</h3>

<p>Nightwatch-extra’s base-test-class.js passes certain information, such as selenium session information and test result, back to magellan. We highly recommend all your tests extend it.</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="kr">const</span> <span class="nx">Test</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">"testarmada-nightwatch-extra/lib/base-test-class"</span><span class="p">);</span>

<span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Test</span><span class="p">({</span>
  <span class="s2">"Load goole page"</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">client</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">client</span><span class="p">.</span><span class="nx">url</span><span class="p">(</span><span class="s2">"http://www.google.com"</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre>
</div>

<h4 id="enable-nightwatch-extra-command">Enable nightwatch-extra command</h4>

<p>To use nightwatch-extra’s command API, you need to add its path to nightwatch.json</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code>  <span class="s2">"custom_commands_path"</span><span class="err">:</span> <span class="p">[</span>
    <span class="s2">"./node_modules/testarmada-nightwatch-extra/lib/commands"</span>
  <span class="p">],</span>
</code></pre>
</div>

<p>A typical flow of how nightwatch-extra’s command works is</p>

<ol>
  <li>Get all information, like selector, values, callback, from command() method’s arguments.</li>
  <li>Check element’s apparence. If element isn’t present or isn’t visible within given time, fail the command.</li>
  <li>Invoke customized code to get element information (via injectedJsCommand() for browser test command).</li>
  <li>Expose element handler to user to do extra things to the element via do().</li>
</ol>

<p>All commands of nightwatch-extra won’t proceed if either of the following conditions isn’t met.</p>

<ol>
  <li>The element you want to operate is in the DOM.</li>
  <li>The element you want to operate is visible in the view port.</li>
</ol>

<h4 id="enable-nightwatch-extra-assertion">Enable nightwatch-extra assertion</h4>

<p>To use nightwatch-extra’s assertion API, you need to add its path to nightwatch.json</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code>  <span class="s2">"custom_assertions_path"</span><span class="err">:</span> <span class="p">[</span>
    <span class="s2">"./node_modules/testarmada-nightwatch-extra/lib/assertions"</span>
  <span class="p">],</span>
</code></pre>
</div>

<p>A typical flow of how nightwatch-extra’s assertion works is</p>

<ol>
  <li>Get all information, like selector, expectedValue, callback, from command() method’s arguments.</li>
  <li>Check element’s apparence. If element isn’t present or isn’t visible within given time, fail the command.</li>
  <li>Invoke customized code to get element information (via injectedJsCommand() for browser test command).</li>
  <li>Expose element handler to user to do extra things to the element and assert via assert().</li>
</ol>

<p>All assertions of nightwatch-extra won’t proceed if either of the following conditions isn’t met.</p>

<ol>
  <li>The element you want to operate is in the DOM.</li>
  <li>The element you want to operate is visible in the view port.</li>
</ol>

<h4 id="page-object">Page Object</h4>

<p>Nightwatch-extra is fully compatible with nightwatchjs’ page object pattern. You can access nightwatch-extra’s API or your customized API in page object command via</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code>  <span class="nx">createNewCreditCard</span><span class="err">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kr">const</span> <span class="nx">selectors</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">elements</span><span class="p">;</span>
    <span class="k">return</span> <span class="k">this</span>
      <span class="p">.</span><span class="nx">clickEl</span><span class="p">(</span><span class="nx">selectors</span><span class="p">.</span><span class="nx">addCreditCardButton</span><span class="p">.</span><span class="nx">selector</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">setElValue</span><span class="p">(</span><span class="nx">selectors</span><span class="p">.</span><span class="nx">firstName</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span> <span class="s2">"testarmada"</span><span class="p">);</span>
  <span class="p">},</span>
</code></pre>
</div>

<p>All nightwatchjs’ APIs are accessible and chainable with nightwatch-extra’s API or your customized API via</p>

<div class="language-js highlighter-rouge"><pre class="highlight"><code>  <span class="nx">selectPayByCash</span><span class="err">:</span> <span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span>
      <span class="p">.</span><span class="nx">clickMobileEl</span><span class="p">(</span><span class="s2">"accessibility id"</span><span class="p">,</span> <span class="nx">selectors</span><span class="p">.</span><span class="nx">morePaymentOptions</span><span class="p">.</span><span class="nx">selector</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">swipeMobileElTo</span><span class="p">(</span><span class="s2">"xpath"</span><span class="p">,</span> <span class="nx">selectors</span><span class="p">.</span><span class="nx">visaCheckout</span><span class="p">.</span><span class="nx">selector</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">50</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">api</span><span class="p">.</span><span class="nx">pause</span><span class="p">(</span><span class="mi">3000</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">clickMobileEl</span><span class="p">(</span><span class="s2">"xpath"</span><span class="p">,</span> <span class="nx">selectors</span><span class="p">.</span><span class="nx">payWithCash</span><span class="p">.</span><span class="nx">selector</span><span class="p">);</span>
    <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
  <span class="p">}</span>
</code></pre>
</div>


  </div>
  <div class="clear"></div>
</div>
<script type="text/javascript">
  var elements = document.getElementsByClassName('highlight');
  for (var i = 0; i < elements.length; i++) {
    elements[i].className += " line-numbers";
    if (!elements[i].parentElement.classList.value.match(/language/)) {
      elements[i].children[0].className = "language-javascript";
    }
  }
</script>
<script type="text/javascript" src="/js/prism.js"></script>
<script src="/js/jquery-3.3.1.min.js"></script>
<script src="/js/doc.js"></script>
	</div>

	<footer>
		<img class="left-footer-logo" alt="Left Footer Logo"
			 src="/documentation/images/dxt-logo.png"
			 srcset="/documentation/images/dxt-logo@2x.png 2x,
					 /documentation/images/dxt-logo@3x.png 3x">
		
		<span class="copyright">&copy; None</span>
		
		<img class="right-footer-logo" alt="Right Footer Logo"
			 src="/documentation/images/walmartlabs-logo.png"
			 srcset="/documentation/images/walmartlabs-logo@2x.png 2x,
			 		 /documentation/images/walmartlabs-logo@3x.png 3x">
	</footer>

</body>
</html>
